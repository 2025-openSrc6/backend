# ğŸš€ Week 2 Sui í†µí•© ëª…ì„¸ í™•ì • ì „ ì¢…í•© ê°€ì´ë“œ

## 1. Suiê°€ ì–´ë–»ê²Œ ì‚¬ìš©ë˜ëŠ”ì§€

### 1.1 í˜„ì¬ ì•„í‚¤í…ì²˜ (Week 1)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Next.js Backend                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  POST /api/bets â†’ BetService â†’ BetRepository â†’ D1   â”‚
â”‚  (í˜„ì¬ D1ì—ë§Œ ê¸°ë¡, ë¸”ë¡ì²´ì¸ ì—†ìŒ)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 Sui í†µí•© í›„ ì•„í‚¤í…ì²˜ (Week 2+)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Frontend                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ 1. ë² íŒ… ìš”ì²­
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Next.js Backend                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    BetService                            â”‚    â”‚
â”‚  â”‚   1. D1 ê²€ì¦ (ë¼ìš´ë“œ ìƒíƒœ, ìœ ì € ì”ì•¡)                     â”‚    â”‚
â”‚  â”‚   2. Sui Contract í˜¸ì¶œ (betting::place_bet)             â”‚    â”‚
â”‚  â”‚   3. D1ì— ë² íŒ… + sui_tx_hash ì €ì¥                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ 2. Move Call
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Sui Blockchain                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  del_coin    â”‚  â”‚   betting    â”‚  â”‚  settlement  â”‚          â”‚
â”‚  â”‚  (DEL í† í°)  â”‚  â”‚  (ë² íŒ… í’€)   â”‚  â”‚   (ì •ì‚°)     â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 Sui ì‚¬ìš© ë²”ìœ„ ìš”ì•½

| êµ¬ë¶„       | Suiì— ê¸°ë¡ âœ…                  | D1ì—ë§Œ ì €ì¥ âŒ      |
| ---------- | ------------------------------ | ------------------- |
| **ë² íŒ…**   | Bet Object, DEL Lock, tx_hash  | ë¹ ë¥¸ ì¡°íšŒìš© ìºì‹œ    |
| **ë¼ìš´ë“œ** | BettingPool (ì‹œì‘ ì‹œ ìƒì„±)     | ìŠ¤ì¼€ì¤„ë§, ìƒíƒœ ê´€ë¦¬ |
| **ì •ì‚°**   | Settlement Object, Payout ì „ì†¡ | í†µê³„, ì§‘ê³„ ë°ì´í„°   |
| **ìœ ì €**   | âŒ (ë¶ˆí•„ìš”)                    | í”„ë¡œí•„, ë­í‚¹        |

---

## 2. ê¸°ì¡´ ë¡œì§ê³¼ Suiì˜ ì°¨ì´ì  ë° í†µí•© ë°©ì•ˆ

### 2.1 í˜„ì¬ êµ¬í˜„ëœ ë¡œì§ ë¶„ì„

```typescript
// í˜„ì¬ BetService.createBet() í”Œë¡œìš°
1. Zod ì…ë ¥ ê²€ì¦
2. ë¼ìš´ë“œ ì¡´ì¬/ìƒíƒœ í™•ì¸ (D1)
3. ì‹œê°„ ê²€ì¦ (lockTime ì´ì „)
4. betRepository.create() â†’ D1 INSERT + Round Pool Atomic Update
5. ì‘ë‹µ ë°˜í™˜
```

### 2.2 Sui í†µí•© ì‹œ ë³€ê²½ì 

| í•­ëª©          | Before (Week 1)  | After (Week 2+)           | ë³€ê²½ ì´ìœ       |
| ------------- | ---------------- | ------------------------- | -------------- |
| **ìê¸ˆ Lock** | D1ì—ì„œ ì”ì•¡ ì°¨ê° | Sui Contractì—ì„œ DEL Lock | ë¶ˆë³€ì„±, íˆ¬ëª…ì„± |
| **ë² íŒ… ê¸°ë¡** | D1 INSERTë§Œ      | Sui Bet Object + D1       | ê°ì‚¬ ì¶”ì       |
| **í’€ ê´€ë¦¬**   | D1 Atomic Update | Sui BettingPool Balance   | íƒˆì¤‘ì•™í™”       |
| **ì •ì‚°**      | D1 Update        | Sui Settlement + Transfer | ê²€ì¦ ê°€ëŠ¥ì„±    |

### 2.3 ì½”ë“œ ìˆ˜ì¤€ í†µí•© í¬ì¸íŠ¸

```typescript
// lib/bets/service.ts ìˆ˜ì • ì˜ˆìƒ
async createBet(rawInput: unknown, userId: string): Promise<CreateBetResult> {
  // 1. ì…ë ¥ ê²€ì¦ (ê¸°ì¡´ ìœ ì§€)
  const validated = createBetSchema.parse(rawInput);

  // 2. ë¼ìš´ë“œ/ìƒíƒœ ê²€ì¦ (ê¸°ì¡´ ìœ ì§€)
  const round = await this.roundRepository.findById(validated.roundId);
  // ... ê¸°ì¡´ ê²€ì¦ ë¡œì§

  // ğŸ†• 3. Sui íŠ¸ëœì­ì…˜ ë¨¼ì € ì‹¤í–‰
  const { txHash, betObjectId } = await this.suiBettingService.placeBet({
    poolId: round.suiPoolAddress,  // ë¼ìš´ë“œë³„ Sui Pool
    prediction: validated.prediction,
    amount: validated.amount,
    userDelCoinId: ???,  // ì˜ì‚¬ê²°ì • í•„ìš”
  });

  // 4. Sui ì„±ê³µ í›„ D1 ê¸°ë¡ (ê¸°ì¡´ + ì¶”ê°€ í•„ë“œ)
  const { bet, round: updatedRound } = await this.betRepository.create({
    ...betInput,
    suiTxHash: txHash,       // ğŸ†•
    suiBetObjectId: betObjectId,  // ğŸ†•
  });

  return { bet, round: updatedRound };
}
```

### 2.4 í•µì‹¬ ì°¨ì´ì : "Sui-First" ì›ì¹™

```
âŒ ì˜ëª»ëœ ìˆœì„œ (ìœ„í—˜!)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. D1ì— ë² íŒ… INSERT                          â”‚
â”‚ 2. Sui íŠ¸ëœì­ì…˜ ì‹œë„                          â”‚
â”‚ 3. Sui ì‹¤íŒ¨ â†’ D1ì— ì´ë¯¸ ê¸°ë¡ë¨ (ë¶ˆì¼ì¹˜!)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… ì˜¬ë°”ë¥¸ ìˆœì„œ (Sui-First)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. D1ì—ì„œ ì½ê¸° ì „ìš© ê²€ì¦ (ìƒíƒœ, ì‹œê°„)         â”‚
â”‚ 2. Sui íŠ¸ëœì­ì…˜ ì‹¤í–‰ (place_bet)             â”‚
â”‚ 3. Sui ì„±ê³µ í™•ì¸ (tx_digest)                 â”‚
â”‚ 4. D1ì— INSERT (sui_tx_hash í¬í•¨)            â”‚
â”‚                                              â”‚
â”‚ â†’ Sui ì‹¤íŒ¨ ì‹œ: D1ì— ì•„ë¬´ê²ƒë„ ê¸°ë¡ ì•ˆë¨        â”‚
â”‚ â†’ ë°ì´í„° ì¼ê´€ì„± ë³´ì¥!                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Suiì—ì„œ í•´ì•¼ í•  ì‘ì—… ëª©ë¡

### 3.1 Move ì»¨íŠ¸ë™íŠ¸ ê°œë°œ

| ëª¨ë“ˆ              | ìš°ì„ ìˆœìœ„ | ë‹´ë‹¹ | ì˜ˆìƒ ì‹œê°„ |
| ----------------- | -------- | ---- | --------- |
| `del_coin.move`   | P0       | íƒœì›… | Day 1     |
| `betting.move`    | P0       | íƒœì›… | Day 2-3   |
| `settlement.move` | P1       | íƒœì›… | Day 4-5   |
| `nft.move`        | P2       | ì˜ë¯¼ | Week 3    |

### 3.2 Next.js í†µí•© ê°œë°œ

| íŒŒì¼                    | ì—­í•                       | ìš°ì„ ìˆœìœ„ |
| ----------------------- | ------------------------- | -------- |
| `lib/sui/client.ts`     | SuiClient ì´ˆê¸°í™”          | P0       |
| `lib/sui/config.ts`     | Package ID, Admin Key     | P0       |
| `lib/sui/betting.ts`    | placeBet, lockPool í•¨ìˆ˜   | P0       |
| `lib/sui/settlement.ts` | finalize, distribute í•¨ìˆ˜ | P1       |
| `lib/sui/verify.ts`     | íŠ¸ëœì­ì…˜ ê²€ì¦             | P0       |

### 3.3 DB ìŠ¤í‚¤ë§ˆ ì—…ë°ì´íŠ¸

```sql
-- bets í…Œì´ë¸” ì¶”ê°€ ì»¬ëŸ¼
ALTER TABLE bets ADD COLUMN sui_tx_hash TEXT;
ALTER TABLE bets ADD COLUMN sui_bet_object_id TEXT;
ALTER TABLE bets ADD COLUMN sui_payout_tx_hash TEXT;

-- rounds í…Œì´ë¸” ì¶”ê°€ ì»¬ëŸ¼
ALTER TABLE rounds ADD COLUMN sui_pool_address TEXT;
ALTER TABLE rounds ADD COLUMN sui_settlement_object_id TEXT;
```

---

## 4. ê° ì‘ì—…ì˜ ëª©í‘œì™€ ìˆ˜í–‰ ë¡œì§

### 4.1 del_coin.move

**ëª©í‘œ**: DEL ì¬í™”(í† í°) ì •ì˜ ë° ë°œí–‰/ì†Œê°

```rust
// í•µì‹¬ ë¡œì§
module deltax::del_coin {
    // ëª©í‘œ 1: Coin íƒ€ì… ì •ì˜
    struct DEL has drop {}

    // ëª©í‘œ 2: ì´ˆê¸°í™” (TreasuryCap ë°œí–‰)
    fun init(witness: DEL, ctx: &mut TxContext)

    // ëª©í‘œ 3: Mint (ì¶œì„ ë³´ìƒ, ì •ì‚° ë°°ë‹¹)
    public fun mint(treasury: &mut TreasuryCap<DEL>, amount: u64, ctx): Coin<DEL>

    // ëª©í‘œ 4: Burn (ì„ íƒì )
    public fun burn(treasury: &mut TreasuryCap<DEL>, coin: Coin<DEL>)
}
```

### 4.2 betting.move

**ëª©í‘œ**: ë² íŒ… ìƒì„± ë° ìê¸ˆ Lock

```rust
module deltax::betting {
    // Struct 1: ê°œë³„ ë² íŒ… (ìœ ì € ì†Œìœ  Object)
    struct Bet has key, store {
        id: UID,
        round_id: u64,
        user: address,
        prediction: u8,  // 1=GOLD, 2=BTC
        amount: u64,
        timestamp: u64,
    }

    // Struct 2: ë¼ìš´ë“œë³„ í’€ (Shared Object)
    struct BettingPool has key {
        id: UID,
        round_id: u64,
        gold_balance: Balance<DEL>,
        btc_balance: Balance<DEL>,
        status: u8,  // 1=OPEN, 2=LOCKED, 3=SETTLED
        // ...
    }

    // í•¨ìˆ˜ 1: í’€ ìƒì„± (Cron Job 2 - Round Opener)
    public fun create_pool(...): ID

    // í•¨ìˆ˜ 2: ë² íŒ… (ìœ ì €)
    public fun place_bet(pool: &mut BettingPool, prediction: u8, payment: Coin<DEL>, ...): ID

    // í•¨ìˆ˜ 3: í’€ ì ê¸ˆ (Cron Job 3 - Betting Locker)
    public fun lock_pool(pool: &mut BettingPool, admin_cap: &AdminCap)
}
```

### 4.3 settlement.move

**ëª©í‘œ**: ì •ì‚° ê¸°ë¡ ë° ë°°ë‹¹ ì „ì†¡

```rust
module deltax::settlement {
    // Struct: ì •ì‚° ê¸°ë¡ (ë¶ˆë³€ Shared Object)
    struct Settlement has key {
        id: UID,
        round_id: u64,
        winner: u8,
        payout_ratio: u64,
        // ê°€ê²© ë°ì´í„°, í’€ ì •ë³´ ë“±
    }

    // í•¨ìˆ˜ 1: ë¼ìš´ë“œ ì¢…ë£Œ (Cron Job 4)
    public fun finalize_round(pool: &mut BettingPool, prices: PriceData, ...): ID

    // í•¨ìˆ˜ 2: ë°°ë‹¹ ì „ì†¡ (Cron Job 5)
    public fun distribute_payout(pool: &mut BettingPool, bet: Bet, settlement: &Settlement, ...): Coin<DEL>
}
```

---

## 5. ëª…ì„¸ ì‘ì„± ì „ ê³ ë¯¼í•´ì•¼ í•  ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### 5.1 Object ì„¤ê³„ ê³ ë¯¼

#### ğŸ¤” ê³ ë¯¼ 1: Shared Object vs Owned Object

| êµ¬ë¶„       | Shared Object                | Owned Object      |
| ---------- | ---------------------------- | ----------------- |
| **ì ‘ê·¼**   | ëˆ„êµ¬ë‚˜ ì½ê¸°/ì“°ê¸°             | ì†Œìœ ìë§Œ          |
| **ë³‘ë ¬ì„±** | ë™ì‹œ ì ‘ê·¼ ì‹œ ìˆœì°¨ ì²˜ë¦¬       | ì™„ì „ ë³‘ë ¬         |
| **ìš©ë„**   | BettingPool (ì—¬ëŸ¬ ìœ ì € ì ‘ê·¼) | Bet (ìœ ì €ë³„ ì†Œìœ ) |

**ê¶Œì¥ ì„¤ê³„**:

```
BettingPool â†’ Shared Object (ì—¬ëŸ¬ ìœ ì €ê°€ ë² íŒ…)
Bet â†’ Owned Object (ìœ ì € ê°œì¸ ì†Œìœ )
Settlement â†’ Shared Object (ëˆ„êµ¬ë‚˜ ì¡°íšŒ ê°€ëŠ¥)
```

#### ğŸ¤” ê³ ë¯¼ 2: DEL Coin ì†Œìœ ê¶Œ

**ì˜µì…˜ A: ìœ ì €ê°€ DEL Coin ì§ì ‘ ì†Œìœ **

```
ì¥ì : íƒˆì¤‘ì•™í™”, ìœ ì € ìì‚° ëª…í™•
ë‹¨ì : ìœ ì €ê°€ SUI ê°€ìŠ¤ë¹„ í•„ìš” (UX ë‚˜ì¨)
```

**ì˜µì…˜ B: Adminì´ DEL ê´€ë¦¬ (Sponsored)**

```
ì¥ì : ìœ ì €ëŠ” DELë§Œ í•„ìš”, ê°€ìŠ¤ë¹„ ëŒ€ë‚©
ë‹¨ì : ì¤‘ì•™í™” ìš”ì†Œ ì¡´ì¬
```

**ê¶Œì¥**: ì˜µì…˜ B (Sponsored Transaction)

- í•™êµ í”„ë¡œì íŠ¸ ê·œëª¨ì—ì„œ ìœ ì € UXê°€ ì¤‘ìš”
- SUI ê°€ìŠ¤ë¹„ ì›” ~$10 ìˆ˜ì¤€

### 5.2 ë³´ì•ˆ ê³ ë¯¼

#### ğŸ¤” ê³ ë¯¼ 3: Admin Key ê´€ë¦¬

```
ë¬¸ì œ: Sponsored Txë¥¼ ìœ„í•´ Admin Secret Keyê°€ ì„œë²„ì— ìˆì–´ì•¼ í•¨

ê¶Œì¥ ë³´ì•ˆ ì¡°ì¹˜:
1. .env.local / Cloudflare Secretsì—ë§Œ ì €ì¥
2. ì ˆëŒ€ Git ì»¤ë°‹ ê¸ˆì§€
3. Key Rotation ì£¼ê¸° ì„¤ì • (ì›” 1íšŒ)
4. Admin Wallet ì”ì•¡ ëª¨ë‹ˆí„°ë§ ì•Œë¦¼
```

#### ğŸ¤” ê³ ë¯¼ 4: íŠ¸ëœì­ì…˜ ê²€ì¦

```typescript
// í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë°›ì€ tx_hash ë¬´ì¡°ê±´ ê²€ì¦
async function verifyBetTransaction(
  txHash: string,
  expectedData: {
    roundId: string;
    prediction: 'GOLD' | 'BTC';
    amount: number;
  },
) {
  const tx = await suiClient.getTransactionBlock({ digest: txHash });

  // 1. ì„±ê³µ ì—¬ë¶€
  if (tx.effects?.status?.status !== 'success') throw new Error('Tx failed');

  // 2. ì´ë²¤íŠ¸ ë°ì´í„° ê²€ì¦
  const betEvent = tx.events?.find((e) => e.type.includes('::BetPlaced'));
  if (betEvent.parsedJson.amount !== expectedData.amount) {
    throw new Error('Amount mismatch');
  }
  // ...
}
```

### 5.3 ë³µêµ¬ ì‹œë‚˜ë¦¬ì˜¤ ê³ ë¯¼

#### ğŸ¤” ê³ ë¯¼ 5: Sui ì„±ê³µ â†’ D1 ì‹¤íŒ¨

```
ì‹œë‚˜ë¦¬ì˜¤:
1. Sui place_bet() ì„±ê³µ (DEL Lockë¨)
2. D1 INSERT ì‹¤íŒ¨ (ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜)
3. ìœ ì € ëˆì€ LockëëŠ”ë° ê¸°ë¡ ì—†ìŒ!

í•´ê²°ì±…:
Option A: ë³µêµ¬ íì— ì¶”ê°€ + ë‚˜ì¤‘ì— D1 ë™ê¸°í™”
Option B: Sui Event êµ¬ë…ìœ¼ë¡œ D1 ìë™ ë™ê¸°í™”

ê¶Œì¥: Option A (ë‹¨ìˆœí•¨)
- ë³µêµ¬ í í…Œì´ë¸” ìƒì„±
- Recovery Jobì—ì„œ ì£¼ê¸°ì  ì²˜ë¦¬
```

### 5.4 í…ŒìŠ¤íŠ¸ ì „ëµ ê³ ë¯¼

#### ğŸ¤” ê³ ë¯¼ 6: Move í…ŒìŠ¤íŠ¸ vs í†µí•© í…ŒìŠ¤íŠ¸

```
Layer 1: Move ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”œâ”€â”€ tests/betting_tests.move
â”œâ”€â”€ test_place_bet() - ë² íŒ… ìƒì„±
â”œâ”€â”€ test_lock_pool() - í’€ ì ê¸ˆ
â””â”€â”€ test_insufficient_balance() - ì”ì•¡ ë¶€ì¡±

Layer 2: Next.js Mock í…ŒìŠ¤íŠ¸
â”œâ”€â”€ __tests__/lib/sui/betting.test.ts
â”œâ”€â”€ Sui Client Mockìœ¼ë¡œ ë¡œì§ í…ŒìŠ¤íŠ¸
â””â”€â”€ ì‹¤ì œ ë„¤íŠ¸ì›Œí¬ ì—†ì´ ë¹ ë¥¸ í”¼ë“œë°±

Layer 3: Testnet í†µí•© í…ŒìŠ¤íŠ¸
â”œâ”€â”€ ì‹¤ì œ Sui Testnet ì—°ë™
â”œâ”€â”€ CI/CDì—ì„œ ì œì™¸ (ìˆ˜ë™)
â””â”€â”€ ë°°í¬ ì „ ìµœì¢… ê²€ì¦
```

---

## 6. íŒ€ê³¼ì˜ ì˜ì‚¬ê²°ì • ì‚¬í•­ + ì¶”ì²œ

### 6.1 ì˜ì‚¬ê²°ì • 1: DEL ë°œí–‰ ì •ì±…

| ì˜µì…˜               | ì„¤ëª…               | ê¶Œì¥                 |
| ------------------ | ------------------ | -------------------- |
| **A. ë¬´ì œí•œ ë°œí–‰** | í•„ìš”í•  ë•Œë§ˆë‹¤ mint | â­ ì¶”ì²œ (í”„ë¡œí† íƒ€ì…) |
| **B. ê³ ì • ê³µê¸‰ëŸ‰** | ì´ˆê¸° 1ì–µ DEL ë°œí–‰  | í”„ë¡œë•ì…˜ìš©           |

**ì¶”ì²œ**: ì˜µì…˜ A (í”„ë¡œí† íƒ€ì… ë‹¨ê³„)

- ì´ìœ : ë³µì¡ë„ ìµœì†Œí™”, í…ŒìŠ¤íŠ¸ í¸ì˜ì„±

### 6.2 ì˜ì‚¬ê²°ì • 2: ë² íŒ… í”Œë¡œìš°

| ì˜µì…˜                    | ì„¤ëª…                   | ê¶Œì¥    |
| ----------------------- | ---------------------- | ------- |
| **A. ë°±ì—”ë“œ Sponsored** | ì„œë²„ì—ì„œ ëª¨ë“  Sui í˜¸ì¶œ | â­ ì¶”ì²œ |
| **B. í”„ë¡ íŠ¸ ì„œëª…**      | ìœ ì € ì§€ê°‘ìœ¼ë¡œ ì„œëª…     | UX ë³µì¡ |

**ì¶”ì²œ**: ì˜µì…˜ A

- ì´ìœ : ìœ ì €ëŠ” SUI ì—†ì–´ë„ ë¨, êµ¬í˜„ ë‹¨ìˆœ

```
í”Œë¡œìš°:
1. í”„ë¡ íŠ¸: POST /api/bets { roundId, prediction, amount }
2. ë°±ì—”ë“œ: Sui place_bet() + Admin ì„œëª…
3. ë°±ì—”ë“œ: D1 ì €ì¥
4. í”„ë¡ íŠ¸: ì„±ê³µ ì‘ë‹µ
```

### 6.3 ì˜ì‚¬ê²°ì • 3: í’€ ê´€ë¦¬ ë°©ì‹

| ì˜µì…˜                     | ì„¤ëª…                        | ê¶Œì¥    |
| ------------------------ | --------------------------- | ------- |
| **A. ë¼ìš´ë“œë‹¹ 1ê°œ Pool** | ë¼ìš´ë“œ ì‹œì‘ ì‹œ Pool ìƒì„±    | â­ ì¶”ì²œ |
| **B. ê¸€ë¡œë²Œ 1ê°œ Pool**   | ëª¨ë“  ë¼ìš´ë“œê°€ 1ê°œ Pool ê³µìœ  | ë³µì¡    |

**ì¶”ì²œ**: ì˜µì…˜ A

- ì´ìœ : ë¼ìš´ë“œë³„ ê²©ë¦¬, ì •ì‚° ë‹¨ìˆœí™”

### 6.4 ì˜ì‚¬ê²°ì • 4: ê°€ê²© ë°ì´í„° ì˜¨ì²´ì¸ ì—¬ë¶€

| ì˜µì…˜            | ì„¤ëª…              | ê¶Œì¥           |
| --------------- | ----------------- | -------------- |
| **A. ì˜¤í”„ì²´ì¸** | D1ì—ë§Œ ì €ì¥       | âŒ íˆ¬ëª…ì„± ë¶€ì¡± |
| **B. ì˜¨ì²´ì¸**   | Settlementì— ê¸°ë¡ | â­ ì¶”ì²œ        |

**ì¶”ì²œ**: ì˜µì…˜ B

- ì´ìœ : íˆ¬ëª…ì„± í™•ë³´, ë¶„ìŸ í•´ê²° ì‹œ ì¦ê±°

### 6.5 ì˜ì‚¬ê²°ì • 5: ìˆ˜ìˆ˜ë£Œ ìˆ˜ì·¨ ë°©ì‹

| ì˜µì…˜                     | ì„¤ëª…                     | ê¶Œì¥    |
| ------------------------ | ------------------------ | ------- |
| **A. Suiì—ì„œ ì¦‰ì‹œ ìˆ˜ì·¨** | Settlement ì‹œ Admin ì „ì†¡ | â­ ì¶”ì²œ |
| **B. D1ì—ì„œë§Œ ê¸°ë¡**     | ë‚˜ì¤‘ì— ìˆ˜ë™ ì •ì‚°         | ë³µì¡    |

**ì¶”ì²œ**: ì˜µì…˜ A

- ìˆ˜ìˆ˜ë£Œ 5%ë¥¼ Settlementì—ì„œ Admin Walletìœ¼ë¡œ ì „ì†¡

### 6.6 ì˜ì‚¬ê²°ì • ìš”ì•½ í…Œì´ë¸”

| #   | ê²°ì • ì‚¬í•­      | ê¶Œì¥ ì˜µì…˜          | ë…¼ì˜ í•„ìš” |
| --- | -------------- | ------------------ | --------- |
| 1   | DEL ë°œí–‰ ì •ì±…  | ë¬´ì œí•œ ë°œí–‰        | â¬œ        |
| 2   | ë² íŒ… í”Œë¡œìš°    | ë°±ì—”ë“œ Sponsored   | â¬œ        |
| 3   | í’€ ê´€ë¦¬ ë°©ì‹   | ë¼ìš´ë“œë‹¹ 1ê°œ       | â¬œ        |
| 4   | ê°€ê²© ì˜¨ì²´ì¸    | Settlementì— ê¸°ë¡  | â¬œ        |
| 5   | ìˆ˜ìˆ˜ë£Œ ìˆ˜ì·¨    | Suiì—ì„œ ì¦‰ì‹œ       | â¬œ        |
| 6   | Admin Key ê´€ë¦¬ | Cloudflare Secrets | â¬œ        |

---

## 7. ëª…ì„¸ ì‘ì„± ì „ ì¶”ê°€ ì¡°ì–¸

### 7.1 ë‹¹ì¥ í•´ì•¼ í•  ì¼ (Today)

1. **Sui CLI ì„¤ì¹˜ ë° í…ŒìŠ¤íŠ¸**

   ```bash
   # ì„¤ì¹˜
   brew install sui

   # ë²„ì „ í™•ì¸
   sui --version

   # Testnet ì„¤ì •
   sui client new-env --alias testnet --rpc https://fullnode.testnet.sui.io:443
   sui client switch --env testnet

   # Faucetìœ¼ë¡œ SUI ë°›ê¸°
   sui client faucet
   ```

2. **ê¸°ì¡´ contracts/rounds.move í™•ì¸**
   - í˜„ì¬ ë„ˆë¬´ ë‹¨ìˆœí•¨ (24ì¤„)
   - SUI_INTEGRATION.mdì˜ betting.move êµ¬ì¡°ë¡œ í™•ì¥ í•„ìš”

3. **Admin Keypair ìƒì„±**
   ```bash
   sui keytool generate ed25519
   # â†’ ì¶œë ¥ëœ addressì™€ secret key ì•ˆì „í•˜ê²Œ ë³´ê´€
   ```

### 7.2 ë‚´ì¼ë¶€í„° í•´ì•¼ í•  ì¼

1. **Move íŠœí† ë¦¬ì–¼ ì™„ë£Œ** (2-3ì‹œê°„)
   - https://docs.sui.io/guides/developer/first-app
   - Counter ì˜ˆì œ â†’ Coin ì˜ˆì œ ìˆœì„œ

2. **del_coin.move ì‘ì„± ë° í…ŒìŠ¤íŠ¸**

   ```bash
   cd contracts
   sui move build
   sui move test
   ```

3. **Testnet ë°°í¬ í…ŒìŠ¤íŠ¸**
   ```bash
   sui client publish --gas-budget 100000000
   ```

### 7.3 ëª…ì„¸ ì‘ì„± ì‹œ í¬í•¨í•  ë‚´ìš© ì²´í¬ë¦¬ìŠ¤íŠ¸

```
â–¡ Module êµ¬ì¡° (del_coin, betting, settlement)
â–¡ Struct ì •ì˜ (Bet, BettingPool, Settlement)
â–¡ Function ì‹œê·¸ë‹ˆì²˜ + íŒŒë¼ë¯¸í„°
â–¡ Event ì •ì˜ (BetPlaced, SettlementCompleted)
â–¡ Error Codes (E_BETTING_CLOSED, E_INSUFFICIENT_AMOUNT ë“±)
â–¡ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ (ë² íŒ… í”Œë¡œìš°, ì •ì‚° í”Œë¡œìš°)
â–¡ Next.js í†µí•© í•¨ìˆ˜ (placeBetOnSui, finalizeRound ë“±)
â–¡ DB ìŠ¤í‚¤ë§ˆ ë³€ê²½ (sui_tx_hash, sui_pool_address ë“±)
â–¡ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ëª©ë¡
```

### 7.4 ë¦¬ìŠ¤í¬ ë° ëŒ€ì‘ ê³„íš

| ë¦¬ìŠ¤í¬         | í™•ë¥  | ì˜í–¥ | ëŒ€ì‘                  |
| -------------- | ---- | ---- | --------------------- |
| Move í•™ìŠµ ì§€ì—° | ì¤‘   | ë†’ìŒ | ê³µì‹ ë¬¸ì„œ + ì˜ˆì œ ì§‘ì¤‘ |
| Testnet ë¶ˆì•ˆì • | ë‚®   | ì¤‘   | Mock ëª¨ë“œ ìœ ì§€        |
| Admin Key ìœ ì¶œ | ë‚®   | ë†’ìŒ | Secrets ê´€ë¦¬ ì² ì €     |
| ê°€ìŠ¤ë¹„ ê³ ê°ˆ    | ì¤‘   | ì¤‘   | ì”ì•¡ ì•Œë¦¼ ì„¤ì •        |

### 7.5 ë§ˆì§€ë§‰ ì¡°ì–¸

1. **ì‘ê²Œ ì‹œì‘í•˜ì„¸ìš”**
   - del_coin.move â†’ ë°°í¬ â†’ í…ŒìŠ¤íŠ¸
   - betting.move (create_poolë§Œ) â†’ ë°°í¬ â†’ í…ŒìŠ¤íŠ¸
   - ì ì§„ì ìœ¼ë¡œ í•¨ìˆ˜ ì¶”ê°€

2. **D1 Mock ëª¨ë“œ ìœ ì§€í•˜ì„¸ìš”**
   - Sui í†µí•© ì¤‘ì—ë„ Mock ëª¨ë“œë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•˜ê²Œ
   - `SUI_ENABLED=false` í™˜ê²½ ë³€ìˆ˜ë¡œ í† ê¸€

3. **ë¬¸ì„œí™” ë¨¼ì €, ì½”ë“œ ë‚˜ì¤‘**
   - Move í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ë¶€í„° í™•ì •
   - íŒ€ì›ê³¼ ê³µìœ  í›„ êµ¬í˜„

---

## ë‹¤ìŒ ë‹¨ê³„

ëª…ì„¸ ì‘ì„±ì„ ì‹œì‘í•˜ë ¤ë©´:

1. **ìœ„ì˜ ì˜ì‚¬ê²°ì • 6ê°œ íŒ€ê³¼ í™•ì •** (30ë¶„)
2. **Move ëª¨ë“ˆë³„ Struct/Function ì‹œê·¸ë‹ˆì²˜ ì‘ì„±** (1ì‹œê°„)
3. **ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ ê·¸ë¦¬ê¸°** (30ë¶„)
4. **ëª…ì„¸ ë¬¸ì„œ ì´ˆì•ˆ ì‘ì„±** (2ì‹œê°„)

ì›í•˜ì‹œë©´ ì œê°€ `docs/ehdnd/SUI_CONTRACT_SPEC.md` ì´ˆì•ˆì„ ì‘ì„±í•´ë“œë¦´ ìˆ˜ ìˆì–´ìš”. ì˜ì‚¬ê²°ì • ì‚¬í•­ë“¤ í™•ì • í›„ ë§ì”€í•´ì£¼ì„¸ìš”! ğŸš€

---

ì¢‹ì•„ìš”! í•˜ë‚˜ì”© ëª…í™•í•˜ê²Œ ì„¤ëª…í•´ë“œë¦´ê²Œìš”. ë¸”ë¡ì²´ì¸ ê°œë…ì´ ì²˜ìŒì´ë©´ í—·ê°ˆë¦´ ìˆ˜ ìˆì–´ìš”.

---

# ğŸ“ Sui í†µí•© ê°œë… ëª…í™•í™”

## 1. ìŠ¤í‚¤ë§ˆ í™•ì¸ âœ…

ì´ë¯¸ Sui ê´€ë ¨ í•„ë“œë“¤ì´ ì˜ ì¤€ë¹„ë˜ì–´ ìˆë„¤ìš”!

```typescript
// bets.ts - ì´ë¯¸ ìˆìŒ âœ…
suiBetObjectId: text('sui_bet_object_id'),
suiTxHash: text('sui_tx_hash'),
suiPayoutTxHash: text('sui_payout_tx_hash'),

// rounds.ts - ì´ë¯¸ ìˆìŒ âœ…
suiPoolAddress: text('sui_pool_address'),
suiSettlementObjectId: text('sui_settlement_object_id'),
```

---

## 2. DEL Coin ë°œí–‰ì´ ë­ì•¼? ğŸª™

### í•µì‹¬ ì§ˆë¬¸: "ìš°ë¦¬ê°€ ì½”ì¸ì„ ë°œí–‰í•˜ëŠ” ê±°ì•¼?"

**ë„¤, ë§ì•„ìš”!** DELì€ ìš°ë¦¬ê°€ ë§Œë“œëŠ” **"ê²Œì„ ë‚´ ì¬í™”"**ì˜ˆìš”.

### ë¹„ìœ ë¡œ ì„¤ëª…í•˜ë©´:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ì‹¤ì„¸ê³„ ë¹„ìœ                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SUI ì½”ì¸  =  ì›í™” (â‚©)  =  ì§„ì§œ ëˆ                       â”‚
â”‚  DEL ì½”ì¸  =  ë¡¯ë°ì›”ë“œ ììœ ì´ìš©ê¶Œ  =  ê²Œì„ ë‚´ ì¬í™”        â”‚
â”‚                                                         â”‚
â”‚  SUIëŠ” ê°€ìŠ¤ë¹„(ìˆ˜ìˆ˜ë£Œ)ë¡œ ì‚¬ìš©                             â”‚
â”‚  DELì€ ë² íŒ…ì— ì‚¬ìš©                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### "ë°œí–‰"ì´ë€?

```
ë°œí–‰(Mint) = ìƒˆë¡œìš´ DEL ì½”ì¸ì„ ë§Œë“¤ì–´ì„œ ìœ ì €ì—ê²Œ ì£¼ëŠ” ê²ƒ

ì˜ˆì‹œ:
- ì¶œì„ ë³´ìƒ: 5,000 DEL ë°œí–‰ â†’ ìœ ì € ì§€ê°‘ìœ¼ë¡œ ì „ì†¡
- ì •ì‚° ë°°ë‹¹: ìŠ¹ìì—ê²Œ 10,000 DEL ë°œí–‰ â†’ ìœ ì € ì§€ê°‘ìœ¼ë¡œ ì „ì†¡
```

### ë¬´ì œí•œ ë°œí–‰ vs ê³ ì • ê³µê¸‰ëŸ‰

```
ì˜µì…˜ A: ë¬´ì œí•œ ë°œí–‰ (ì¶”ì²œ)
- í•„ìš”í•  ë•Œë§ˆë‹¤ DELì„ ìƒˆë¡œ ë§Œë“¦
- ì¸í”Œë ˆì´ì…˜ ê±±ì •? â†’ ì–´ì°¨í”¼ í•™êµ í”„ë¡œì íŠ¸ë‹ˆê¹Œ ê´œì°®ì•„ìš”

ì˜µì…˜ B: ê³ ì • ê³µê¸‰ëŸ‰
- ì²˜ìŒì— 1ì–µ DEL ë°œí–‰í•´ë†“ê³  ë¶„ë°°
- ë” ë³µì¡í•¨
```

**ê²°ë¡ **: ë¬´ì œí•œ ë°œí–‰ìœ¼ë¡œ ê°€ìš”. ë‹¨ìˆœí•˜ë‹ˆê¹Œ.

---

## 3. Sponsored Transaction ì„¤ëª… ğŸ’³

### ë¬¸ì œ ìƒí™©

```
ë¸”ë¡ì²´ì¸ì—ì„œ ë­”ê°€ë¥¼ í•˜ë ¤ë©´ "ê°€ìŠ¤ë¹„"ê°€ í•„ìš”í•´ìš”.
ê°€ìŠ¤ë¹„ = íŠ¸ëœì­ì…˜ ìˆ˜ìˆ˜ë£Œ = SUI ì½”ì¸ìœ¼ë¡œ ì§€ë¶ˆ

ë¬¸ì œ:
ìœ ì €ê°€ DELë¡œ ë² íŒ…í•˜ê³  ì‹¶ì€ë°...
SUI ì½”ì¸ë„ ìˆì–´ì•¼ ê°€ìŠ¤ë¹„ë¥¼ ë‚¼ ìˆ˜ ìˆìŒ ğŸ˜¢
â†’ ìœ ì € ì…ì¥ì—ì„œ ê·€ì°®ìŒ (UX ë‚˜ì¨)
```

### í•´ê²°ì±…: Sponsored Transaction

```
Admin(ìš°ë¦¬ íŒ€)ì´ ê°€ìŠ¤ë¹„ë¥¼ ëŒ€ì‹  ë‚´ì¤Œ!

ìœ ì €: DELë§Œ ìˆìœ¼ë©´ ë¨ âœ…
Admin: SUIë¡œ ê°€ìŠ¤ë¹„ ì§€ë¶ˆ (ìš°ë¦¬ ì§€ê°‘ì—ì„œ)

ë¹„ìš©:
- ë² íŒ… 1íšŒ ê°€ìŠ¤ë¹„ â‰ˆ 0.001 SUI â‰ˆ $0.002
- í•œ ë‹¬ 3000ê±´ ë² íŒ… â‰ˆ 3 SUI â‰ˆ $6
â†’ ê°ë‹¹ ê°€ëŠ¥!
```

### ìœ ì €ì—ê²Œì„œ ìˆ˜ìˆ˜ë£Œ(5%) ë–¼ëŠ” ê²ƒê³¼ ìƒì¶©í•˜ë‚˜ìš”?

**ì•„ë‹ˆìš”, ë³„ê°œì˜ ê°œë…ì´ì—ìš”!**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ê°€ìŠ¤ë¹„ (SUI)              â”‚  í”Œë«í¼ ìˆ˜ìˆ˜ë£Œ (DEL 5%)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ì— ë‚´ëŠ”   â”‚  ìš°ë¦¬ í”Œë«í¼ì´ ê°€ì ¸ê°€ëŠ”    â”‚
â”‚  íŠ¸ëœì­ì…˜ ìˆ˜ìˆ˜ë£Œ           â”‚  ë¹„ì¦ˆë‹ˆìŠ¤ ìˆ˜ìµ             â”‚
â”‚                           â”‚                           â”‚
â”‚  Adminì´ ëŒ€ë‚© (Sponsored)  â”‚  ì •ì‚° ì‹œ í’€ì—ì„œ 5% ì°¨ê°   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì˜ˆì‹œ:
ì´ í’€ 10,000 DEL â†’ ìˆ˜ìˆ˜ë£Œ 500 DEL â†’ ë°°ë‹¹ í’€ 9,500 DEL
ì´ê±´ DEL ë‹¨ìœ„ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ê³ ,
ê°€ìŠ¤ë¹„ëŠ” ë³„ë„ë¡œ Adminì´ SUIë¡œ ì§€ë¶ˆí•˜ëŠ” ê±°ì˜ˆìš”.
```

---

## 4. ì§€ê°‘ ë¡œê·¸ì¸ êµ¬í˜„ì´ ê°€ëŠ¥í•´? ğŸ”

### í° ê·¸ë¦¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ë‘ ê°€ì§€ ë°©ì‹                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  ë°©ì‹ A: í”„ë¡ íŠ¸ ì§€ê°‘ ì„œëª… (Web3 í‘œì¤€)                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚  1. ìœ ì €ê°€ Sui Wallet ì—°ê²° (Chrome Extension)              â”‚
â”‚  2. í”„ë¡ íŠ¸ì—ì„œ íŠ¸ëœì­ì…˜ ìƒì„±                                â”‚
â”‚  3. ìœ ì €ê°€ ì§€ê°‘ì—ì„œ ì„œëª… (íŒì—… ëœ¸)                          â”‚
â”‚  4. ì„œëª…ëœ íŠ¸ëœì­ì…˜ì„ ë¸”ë¡ì²´ì¸ì— ì „ì†¡                       â”‚
â”‚                                                            â”‚
â”‚  ì¥ì : íƒˆì¤‘ì•™í™”, ìœ ì €ê°€ ì§ì ‘ ì„œëª…                           â”‚
â”‚  ë‹¨ì : UX ë³µì¡ (ë§¤ë²ˆ íŒì—…), ìœ ì €ê°€ SUI ê°€ìŠ¤ë¹„ í•„ìš”          â”‚
â”‚                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  ë°©ì‹ B: ë°±ì—”ë“œ Sponsored (ìš°ë¦¬ ì¶”ì²œ) â­                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”‚
â”‚  1. ìœ ì €ê°€ Sui Wallet ì—°ê²° â†’ ì§€ê°‘ ì£¼ì†Œë§Œ ê°€ì ¸ì˜´            â”‚
â”‚  2. í”„ë¡ íŠ¸: POST /api/bets { address, amount, ... }        â”‚
â”‚  3. ë°±ì—”ë“œ: Admin í‚¤ë¡œ ì„œëª…í•´ì„œ íŠ¸ëœì­ì…˜ ì „ì†¡               â”‚
â”‚  4. ë¸”ë¡ì²´ì¸ì—ì„œ ìœ ì € ì§€ê°‘ìœ¼ë¡œ ê²°ê³¼ ë°˜ì˜                    â”‚
â”‚                                                            â”‚
â”‚  ì¥ì : UX ì‹¬í”Œ, ìœ ì €ëŠ” SUI ë¶ˆí•„ìš”                          â”‚
â”‚  ë‹¨ì : Admin í‚¤ ê´€ë¦¬ í•„ìš”                                  â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### "ì§€ê°‘ ë¡œê·¸ì¸"ì´ë€?

```typescript
// í”„ë¡ íŠ¸ì—”ë“œì—ì„œ
const wallet = await connectWallet(); // Sui Wallet Extension
const userAddress = wallet.address; // "0x1234abcd..."

// ì´ addressê°€ ìœ ì €ì˜ "ë¸”ë¡ì²´ì¸ ID"ê°€ ë¨
// ìš°ë¦¬ D1ì˜ users.id ëŒ€ì‹  ì´ addressë¡œ ì‹ë³„ ê°€ëŠ¥
```

### ìš°ë¦¬ëŠ” í† í°ì„ ë°œí–‰í•˜ëŠ” êµ¬ì¡°ì¸ê°€?

**ë‘ ê°€ì§€ "í† í°"ì´ ìˆì–´ìš”:**

```
1. DEL ì½”ì¸ (Sui ë¸”ë¡ì²´ì¸ ìœ„)
   - ìš°ë¦¬ê°€ Move ì»¨íŠ¸ë™íŠ¸ë¡œ ë°œí–‰
   - ìœ ì € ì§€ê°‘ì— ì €ì¥ë¨

2. ì¸ì¦ í† í° (JWT ë“±)
   - ìš°ë¦¬ ì„œë²„ì—ì„œ ë°œí–‰
   - ì„¸ì…˜ ê´€ë¦¬ìš©

ë‘˜ì€ ì™„ì „ ë³„ê°œ!
```

### ì¶”ì²œ êµ¬í˜„ ë°©ì‹

```
1. í”„ë¡ íŠ¸ì—ì„œ Sui Wallet ì—°ê²°
2. ìœ ì € ì§€ê°‘ ì£¼ì†Œ(0x...) íšë“
3. ì´ ì£¼ì†Œë¡œ ì„œëª… ê²€ì¦ (ë³¸ì¸ í™•ì¸)
4. ìš°ë¦¬ ì„œë²„ì—ì„œ JWT ë°œê¸‰ (ì„¸ì…˜ ìœ ì§€)
5. API í˜¸ì¶œ ì‹œ JWT + ì§€ê°‘ ì£¼ì†Œ ì‚¬ìš©
```

---

## 5. ê°€ê²© ë°ì´í„° ì˜¨ì²´ì¸ ê¸°ë¡ ğŸ“Š

### "ì˜¨ì²´ì¸ì— ê¸°ë¡"ì´ë€?

```
ì˜¤í”„ì²´ì¸ = D1 ë°ì´í„°ë² ì´ìŠ¤ (ìš°ë¦¬ ì„œë²„)
ì˜¨ì²´ì¸ = Sui ë¸”ë¡ì²´ì¸ (íƒˆì¤‘ì•™í™”, ë¶ˆë³€)

í˜„ì¤€ì´ API â†’ ê°€ê²© ë°ì´í„° â†’ ì–´ë””ì— ì €ì¥?
```

### êµ¬í˜„ ë°©ì‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ì •ì‚° ì‹œ (Job 4: Round Finalizer)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  1. í˜„ì¤€ì´ API í˜¸ì¶œ â†’ gold_end: 2650.50, btc_end: 98234 â”‚
â”‚                                                         â”‚
â”‚  2. Sui Contract í˜¸ì¶œ (settlement::finalize_round)     â”‚
â”‚     - gold_start: 2645.00                               â”‚
â”‚     - gold_end: 2650.50                                 â”‚
â”‚     - btc_start: 97800.00                               â”‚
â”‚     - btc_end: 98234.00                                 â”‚
â”‚     - winner: GOLD                                      â”‚
â”‚                                                         â”‚
â”‚  3. Settlement Objectê°€ ë¸”ë¡ì²´ì¸ì— ìƒì„±ë¨               â”‚
â”‚     â†’ ì˜êµ¬ ë³´ì¡´, ëˆ„êµ¬ë‚˜ ì¡°íšŒ ê°€ëŠ¥, ì¡°ì‘ ë¶ˆê°€!            â”‚
â”‚                                                         â”‚
â”‚  4. D1ì—ë„ ë™ì¼ ë°ì´í„° ì €ì¥ (ë¹ ë¥¸ ì¡°íšŒìš©)                â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì‰¬ìš´ê°€ìš”?

**ë„¤, ê·¸ëƒ¥ í•¨ìˆ˜ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê¸°ë©´ ë©ë‹ˆë‹¤!**

```rust
// settlement.move
public fun finalize_round(
    pool: &mut BettingPool,
    gold_start: u64,    // â† í˜„ì¤€ì´ ë°ì´í„°
    gold_end: u64,      // â† í˜„ì¤€ì´ ë°ì´í„°
    btc_start: u64,     // â† í˜„ì¤€ì´ ë°ì´í„°
    btc_end: u64,       // â† í˜„ì¤€ì´ ë°ì´í„°
    admin_cap: &AdminCap,
    ctx: &mut TxContext
) {
    // Settlement Objectì— ì €ì¥ë¨ (ì˜êµ¬ ë³´ì¡´)
}
```

---

## 6. Sui ì •ì‚° vs D1 ì •ì‚° ğŸ”„

### í˜„ì¬ D1 ì •ì‚° (Week 1)

```
Job 5 (settleRound):
1. ë¼ìš´ë“œ ì¡°íšŒ (D1)
2. ë² íŒ… ëª©ë¡ ì¡°íšŒ (D1)
3. ìˆ˜ìˆ˜ë£Œ ê³„ì‚°: platformFee = totalPool * 0.05
4. ë°°ë‹¹ ê³„ì‚°: payout = (bet.amount / winningPool) * payoutPool
5. ë² íŒ… ì—…ë°ì´íŠ¸ (D1): resultStatus='WON', payoutAmount=...
6. ë¼ìš´ë“œ ì—…ë°ì´íŠ¸ (D1): status='SETTLED'

â†’ ìˆ«ìë§Œ ë°”ë€œ, ì‹¤ì œ ëˆ ì´ë™ ì—†ìŒ!
```

### Sui í†µí•© í›„ ì •ì‚°

```
Job 5 (settleRound) ìˆ˜ì •:
1. ë¼ìš´ë“œ ì¡°íšŒ (D1) - ë™ì¼
2. ë² íŒ… ëª©ë¡ ì¡°íšŒ (D1) - ë™ì¼
3. ìˆ˜ìˆ˜ë£Œ/ë°°ë‹¹ ê³„ì‚° - ë™ì¼

ğŸ†• 4. Sui ì •ì‚° íŠ¸ëœì­ì…˜ ì‹¤í–‰:
   - settlement::finalize_round() â†’ Settlement Object ìƒì„±
   - settlement::distribute_payout() â†’ ê° ìŠ¹ìì—ê²Œ DEL ì „ì†¡

5. D1 ì—…ë°ì´íŠ¸ - ë™ì¼ (+ sui_payout_tx_hash ì €ì¥)
```

### D1ê³¼ Suiì˜ ì—­í•  ë¶„ë‹´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  D1 (ì˜¤í”„ì²´ì¸)                  Sui (ì˜¨ì²´ì¸)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ë¹ ë¥¸ ì¡°íšŒ                      ëˆì˜ ì‹¤ì œ ì´ë™             â”‚
â”‚  í†µê³„/ì§‘ê³„                      ë¶ˆë³€ ê¸°ë¡                  â”‚
â”‚  UI ë Œë”ë§ ë°ì´í„°               ê°ì‚¬ ì¶”ì                   â”‚
â”‚  ìŠ¤ì¼€ì¤„ë§                       ë¶„ìŸ ì‹œ ì¦ê±°               â”‚
â”‚                                                            â”‚
â”‚  "ì–¼ë§ˆë¥¼ ë°›ì„ ì˜ˆì •"              "ì‹¤ì œë¡œ ë°›ìŒ"              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Suiì— Userê°€ ìˆë‚˜? ğŸ‘¤

### ë¸”ë¡ì²´ì¸ì—ì„œ "ìœ ì €" = ì§€ê°‘ ì£¼ì†Œ

```
ìš°ë¦¬ D1:
users í…Œì´ë¸” {
  id: "uuid-123",
  nickname: "íƒœì›…",
  email: "...",
  suiAddress: "0xabc123..."  // â† ì´ê²Œ ë¸”ë¡ì²´ì¸ ID
}

Sui ë¸”ë¡ì²´ì¸:
ìœ ì € = ì§€ê°‘ ì£¼ì†Œ (0xabc123...)
- ë³„ë„ì˜ "ìœ ì € í…Œì´ë¸”" ì—†ìŒ
- ì§€ê°‘ ì£¼ì†Œê°€ ê³§ ì‹ ì›
```

### íŠ¸ëœì­ì…˜ ê¸°ë¡

```
ìœ ì €ê°€ ë² íŒ…í•˜ë©´:
1. íŠ¸ëœì­ì…˜ ìƒì„± (place_bet)
2. ë¸”ë¡ì²´ì¸ì— ê¸°ë¡ë¨
3. ëˆ„êµ¬ë‚˜ ì¡°íšŒ ê°€ëŠ¥:
   - "0xabc123...ê°€ 1000 DELì„ GOLDì— ë² íŒ…í•¨"
   - íŠ¸ëœì­ì…˜ í•´ì‹œ: "0xdef456..."
```

---

## 8. ì „ì²´ íë¦„ ì •ë¦¬ (ì‹œê°í™”) ğŸ—ºï¸

### ë² íŒ… í”Œë¡œìš° (Sponsored ë°©ì‹)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ë² íŒ… í”Œë¡œìš°                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ìœ ì €   â”‚     â”‚ Frontend  â”‚     â”‚  Next.js  â”‚     â”‚    Sui    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                â”‚                 â”‚                 â”‚
     â”‚ 1. ì§€ê°‘ ì—°ê²°   â”‚                 â”‚                 â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚                 â”‚
     â”‚                â”‚                 â”‚                 â”‚
     â”‚ 2. ë² íŒ… í´ë¦­   â”‚                 â”‚                 â”‚
     â”‚  (1000 DEL,    â”‚                 â”‚                 â”‚
     â”‚   GOLD ì„ íƒ)   â”‚                 â”‚                 â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚                 â”‚
     â”‚                â”‚                 â”‚                 â”‚
     â”‚                â”‚ 3. POST /api/bets               â”‚
     â”‚                â”‚    { roundId,   â”‚                 â”‚
     â”‚                â”‚      prediction,â”‚                 â”‚
     â”‚                â”‚      amount,    â”‚                 â”‚
     â”‚                â”‚      address }  â”‚                 â”‚
     â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚
     â”‚                â”‚                 â”‚                 â”‚
     â”‚                â”‚                 â”‚ 4. D1 ê²€ì¦     â”‚
     â”‚                â”‚                 â”‚   (ìƒíƒœ, ì‹œê°„)  â”‚
     â”‚                â”‚                 â”‚                 â”‚
     â”‚                â”‚                 â”‚ 5. Sui í˜¸ì¶œ    â”‚
     â”‚                â”‚                 â”‚   (Admin ì„œëª…) â”‚
     â”‚                â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                â”‚                 â”‚                 â”‚
     â”‚                â”‚                 â”‚                 â”‚ 6. DEL Lock
     â”‚                â”‚                 â”‚                 â”‚    Bet ìƒì„±
     â”‚                â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                â”‚                 â”‚   tx_hash,     â”‚
     â”‚                â”‚                 â”‚   bet_object_idâ”‚
     â”‚                â”‚                 â”‚                 â”‚
     â”‚                â”‚                 â”‚ 7. D1 ì €ì¥     â”‚
     â”‚                â”‚                 â”‚   (+ tx_hash)  â”‚
     â”‚                â”‚                 â”‚                 â”‚
     â”‚                â”‚ 8. ì„±ê³µ ì‘ë‹µ    â”‚                 â”‚
     â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚
     â”‚                â”‚                 â”‚                 â”‚
     â”‚ 9. ë² íŒ… ì™„ë£Œ!  â”‚                 â”‚                 â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚                 â”‚
```

### ì •ì‚° í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ì •ì‚° í”Œë¡œìš°                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cron     â”‚     â”‚  Next.js  â”‚     â”‚    Sui    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â”‚                 â”‚                 â”‚
      â”‚ 1. Job 4 íŠ¸ë¦¬ê±° â”‚                 â”‚
      â”‚   (ë¼ìš´ë“œ ì¢…ë£Œ) â”‚                 â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚
      â”‚                 â”‚                 â”‚
      â”‚                 â”‚ 2. í˜„ì¤€ API    â”‚
      â”‚                 â”‚   (ì¢…ë£Œ ê°€ê²©)   â”‚
      â”‚                 â”‚                 â”‚
      â”‚                 â”‚ 3. ìŠ¹ì íŒì •   â”‚
      â”‚                 â”‚   (GOLD)        â”‚
      â”‚                 â”‚                 â”‚
      â”‚                 â”‚ 4. Sui ì •ì‚°    â”‚
      â”‚                 â”‚  finalize()    â”‚
      â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
      â”‚                 â”‚                 â”‚ Settlement
      â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Object ìƒì„±
      â”‚                 â”‚                 â”‚
      â”‚                 â”‚ 5. ìŠ¹ìë³„ ë°°ë‹¹ â”‚
      â”‚                 â”‚  distribute()  â”‚
      â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
      â”‚                 â”‚                 â”‚ ìœ ì €ë³„
      â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ DEL ì „ì†¡
      â”‚                 â”‚                 â”‚
      â”‚                 â”‚ 6. D1 ì—…ë°ì´íŠ¸ â”‚
      â”‚                 â”‚  (SETTLED)      â”‚
      â”‚                 â”‚                 â”‚
```

---

## 9. ì•„ì§ êµ¬ì²´í™” ì•ˆ ëœ ë¶€ë¶„ ì •ë¦¬ ğŸ“

### ìš°ì„  ê²°ì •í•´ì•¼ í•  ê²ƒë“¤

| #   | ì§ˆë¬¸          | ê¶Œì¥ ë‹µë³€         | í™•ì •? |
| --- | ------------- | ----------------- | ----- |
| 1   | DEL ë°œí–‰ ì •ì±… | ë¬´ì œí•œ ë°œí–‰       | âœ…    |
| 2   | ë² íŒ… ë°©ì‹     | ë°±ì—”ë“œ Sponsored  | âœ…    |
| 3   | Pool êµ¬ì¡°     | ë¼ìš´ë“œë‹¹ 1ê°œ      | âœ…    |
| 4   | ê°€ê²© ì˜¨ì²´ì¸   | Settlementì— ê¸°ë¡ | âœ…    |
| 5   | ìˆ˜ìˆ˜ë£Œ ìˆ˜ì·¨   | Suiì—ì„œ ì¦‰ì‹œ      | âœ…    |

### ì¶”ê°€ ê²°ì • í•„ìš”

| #   | ì§ˆë¬¸           | ì˜µì…˜                                     | ê¶Œì¥                |
| --- | -------------- | ---------------------------------------- | ------------------- |
| 6   | ìœ ì € ì¸ì¦ ë°©ì‹ | A: ì§€ê°‘ ì„œëª… ê²€ì¦<br>B: ì§€ê°‘ ì£¼ì†Œë§Œ ì‚¬ìš© | **A** (ë³´ì•ˆ)        |
| 7   | DEL ì´ˆê¸° ì§€ê¸‰  | A: íšŒì›ê°€ì… ì‹œ 10,000 DEL<br>B: ì¶œì„ë§Œ   | **A** (í…ŒìŠ¤íŠ¸ í¸ì˜) |
| 8   | ì§€ê°‘ ë¯¸ì—°ê²° ì‹œ | A: ê°•ì œ ì—°ê²°<br>B: ì²´í—˜ ëª¨ë“œ í—ˆìš©        | **A** (ë‹¨ìˆœ)        |

---

## 10. ë‹¤ìŒ ë‹¨ê³„ ì œì•ˆ ğŸš€

### ì˜¤ëŠ˜ í•´ì•¼ í•  ê²ƒ

```bash
# 1. Sui CLI ì„¤ì¹˜ í™•ì¸
sui --version

# 2. Testnet ì—°ê²°
sui client new-env --alias testnet --rpc https://fullnode.testnet.sui.io:443
sui client switch --env testnet

# 3. Admin ì§€ê°‘ ìƒì„±
sui keytool generate ed25519
# â†’ ì¶œë ¥ëœ addressì™€ key ì €ì¥

# 4. Faucetìœ¼ë¡œ í…ŒìŠ¤íŠ¸ SUI ë°›ê¸°
sui client faucet
```

### ë‚´ì¼ ì‹œì‘í•  ê²ƒ

```
1. del_coin.move ì‘ì„± (ê°€ì¥ ê°„ë‹¨)
2. sui move build ì„±ê³µ í™•ì¸
3. sui move test í†µê³¼
4. Testnet ë°°í¬ í…ŒìŠ¤íŠ¸
```

### ëª…ì„¸ ë¬¸ì„œ ì‘ì„±

ìœ„ì—ì„œ í™•ì •í•œ ê²°ì •ì‚¬í•­ë“¤ì„ ë°”íƒ•ìœ¼ë¡œ `SUI_CONTRACT_SPEC.md` ì‘ì„±í• ê¹Œìš”?

---

## ì§ˆë¬¸ ìˆìœ¼ë©´ ë°”ë¡œ ë¬¼ì–´ë´ìš”!

íŠ¹íˆ ì´ ë¶€ë¶„ì´ ì•„ì§ í—·ê°ˆë¦¬ë©´ ë” ì„¤ëª…í•´ë“œë¦´ê²Œìš”:

- DEL ì½”ì¸ê³¼ SUI ì½”ì¸ì˜ ê´€ê³„
- ì§€ê°‘ ì—°ê²°ê³¼ ì¸ì¦ íë¦„
- Sponsored Transaction ë™ì‘ ì›ë¦¬
- ì •ì‚° ì‹œ ëˆì˜ ì´ë™ ê²½ë¡œ
